# XGBoost


## Training XGBoost classifer:
- `create_classifiers.ipynb`. Can create both binary and multiclass XGBoost models. Also saves the feature importances. Warning: the multiclass model takes about 1 or 2 days to train! The saved models are in `saved_models/`

## Evaluating XGBoost and getting results:
- `binary_xgboost_performance.ipynb` gets the binary XGBoost results on the test set
- `multiclass_xgboost_performance.ipynb` gets the multiclass XGBoost results on the test set
- `binary_xgboost_external_performance.ipynb` gets the binary XGBoost results on the independent data sets
- `binary_xgboost_external_COAD_cm.ipynb` generates the labelled confusion matrix for the binary COAD XGBoost model on the COAD independent dataset

## Saved results:
- `figs/` - confusion matrices, ROC and precision-recall curves showing performance of the models on the test set, binary and multiclass all together
- `binary_xgboost_figs/` generated by `binary_xgboost_performance.ipynb`, performance figs for binary xgboost models (may have some of the same figs as in `figs/`)
- `multiclass_xgboost_figs/` generated by `multiclass_xgboost_performance.ipynb`, performance figs for the multiclass xgboost model (may have some of the same figs as in `figs/`)
- `binary_xgboost_external_figs/` generated by `binary_xgboost_external_performance.ipynb`, performance figs for binary xgboost models on independent data sets
- `binary_xgboost_external_COAD_figs/` generated by `binary_xgboost_external_COAD_cm.ipynb`, labelled confusion matrix for the binary COAD xgboost model on the independent COAD data set
- `feature_importances/` - files with feature importances and concatenated feature importances for each model. Features start from 0 (so feature 0 = first probe, cg0000029)
- `features\_as\_genes/` - files with gene lists that xgboost found (from `Concat\_feature\_importances.ipynb` and `ProbesToGenesUsingNewMapping`). See the README in this folder for the naming convention.
- `feature\_stats` - Looks at stats for each feature (probe) found important. Csv files show how many genes a probe was mapped to, and where this probe was in relation to the gene and CGI. For summary plots, see the swarm plots.

## Looking at found features and finding genes:
- Firstly, run `Concat\_feature_importances.ipynb` - takes in multiple feature importance files from `feature\__importances` and concatenates them to see which features are common on multiple runs.
- Then, run `ProbesToGenesUsingNewMapping.Rmd` (or .R for multiple cancer types at once) - this maps the concatenated features to genes using the mapping file created and stores them in `features\_as\_genes`. Also creates `feature\_stats` files.

## Other files:
- `get\_binary\_acc.ipynb`: Uses `figs/metrics` files to caluclate the average accuracy and mcc of xgboost binary classifiers.
- `Hyperparam_search.ipynb`: Code used for finding hyperparameters. Includes my notes when deciding on them.
- `load_and_eval.ipynb`: Use this if you want to load a saved model and calculate its performance on the test set.
